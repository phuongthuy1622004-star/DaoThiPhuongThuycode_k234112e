<!--bt đánh dấu sao  ktra sửa list of products -> thành list of customer-->
<html>
    <head>
        <title> (Bài 1) DOM 3 - Đào Thị Phương Thùy </title>
        <script type="text/javascript">
            datasets=[
                {
                    ID:"P01",
                    Name:"Coca",
                    Quantity:2,
                    Price:15,
                    Photo:"coca.jpg"
                },
                {
                    ID:"P02",
                    Name:"Pepsi",
                    Quantity:2,
                    Price:15,
                    Photo:"pepsi.jpg"
                },
                {
                    ID:"P03",
                    Name:"Sevenup",
                    Quantity:2,
                    Price:15,
                    Photo:"sevenup.jpg"
                },
                {
                    ID:"P04",
                    Name:"Fanta",
                    Quantity:2,
                    Price:15,
                    Photo:"fanta.jpg"
                },
                {
                    ID:"P05",
                    Name:"Sting",
                    Quantity:2,
                    Price:15,
                    Photo:"sting.jpg"
                }
            ]

        </script>
    </head>
    <body>
        <h1>Case truyền dữ liệu vào rồi in ra</h1>
        <table border="1">
            <caption>List of Products: </caption>
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Name</th>
                    <th>Quantity</th>
                    <th>Price</th>
                    <th>Photo</th>
                    <th>Action:</th>
                </tr>
            </thead>
            <tbody id="product_tbody">

            </tbody>
            <script type="text/javascript">
                product_tbody=document.getElementById("product_tbody")
                //alert(databasets.length)
                for(i=0; i<datasets.length;i++)
            {
                item=datasets[i]
                //step 1: create a tr
                row=document.createElement("tr")
                td_id=document.createElement("td")
                td_name=document.createElement("td")
                td_quantity=document.createElement("td")
                td_price=document.createElement("td")
                td_photo=document.createElement("td")
                td_action=document.createElement("td")
                //step 2: assign value for item html element:
                td_id.innerText=item.ID
                td_name.innerText=item.Name
                td_quantity.innerText=item.Quantity
                td_price.innerText=item.Price

                img=document.createElement("img")
                img.setAttribute("src","../images/"+item.Photo)
                img.setAttribute("width","100")
                img.setAttribute("height","150")
                img.setAttribute("title","Click here to view detail")
                td_photo.appendChild(img)
                //td_photo.innerHTML="<....>"

                ic_detail = document.createElement("img");
                ic_detail.setAttribute("src", "../images/ic_detail.png");
                ic_detail.setAttribute("width", "5%");
                ic_detail.setAttribute("title", "View detail");
                ic_detail.setAttribute("style", "cursor:pointer");
                //storing product data for ic_detail
                ic_detail.item_product=item
                ic_detail.onclick=function()
                {
                    //we need to convert json object to json string:
                    jsonstring=JSON.stringify(this.item_product)
                    //json string -> use localstorage for saving:
                    localStorage.setItem("selected_product",jsonstring)
                    //open detail.html
                    window.open("detail.html","_blank")
                }
                td_action.appendChild(ic_detail);

                ic_edit = document.createElement("img");
                ic_edit.setAttribute("src", "../images/ic_edit.png");
                ic_edit.setAttribute("width", "5%");
                ic_edit.setAttribute("title", "Edit Project");
                ic_edit.setAttribute("style", "cursor:pointer");
                td_action.appendChild(ic_edit);

                ic_delete = document.createElement("img");
                ic_delete.setAttribute("src", "../images/ic_delete.png");
                ic_delete.setAttribute("width", "5%");
                ic_delete.setAttribute("title", "Delete");
                ic_delete.setAttribute("style", "cursor:pointer");

                // Lưu lại hàng (tr) cha của icon này
                ic_delete.my_row_parent = row;

                // Gán sự kiện onclick cho icon xóa
                ic_delete.onclick = function() {
                    if (confirm("Muốn xóa hả?")) {
                        parent_row = this.my_row_parent; // lấy hàng chứa icon được bấm
                        alert("OK, tui sẽ xóa: " + parent_row.childNodes[1].innerText);
                        product_tbody.removeChild(parent_row); // xóa hàng đó khỏi bảng
                    }
                };

                td_action.appendChild(ic_delete);


                // td_action.innerHTML="<....>"
                //step 3: attach td(s) into tr(row):
                row.appendChild(td_id)
                row.appendChild(td_name)
                row.appendChild(td_quantity)
                row.appendChild(td_price)
                row.appendChild(td_photo)
                row.appendChild(td_action)
                //step 4: attach tr(row) into tbody:
                product_tbody.appendChild(row)
            }
            </script>
    </body>
</html>


