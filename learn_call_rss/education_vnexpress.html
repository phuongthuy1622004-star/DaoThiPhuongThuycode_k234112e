<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tin t·ª©c Gi√°o d·ª•c - VnExpress</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 10px;
        }
        
        .update-time {
            text-align: center;
            color: #666;
            font-size: 14px;
            margin-bottom: 20px;
        }
        
        .controls {
            text-align: center;
            margin-bottom: 20px;
        }
        
        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: transform 0.2s;
        }
        
        button:hover {
            transform: scale(1.05);
        }
        
        button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        
        caption {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
        }
        
        thead {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        th {
            padding: 12px;
            text-align: left;
            font-weight: bold;
        }
        
        td {
            padding: 12px;
            border-bottom: 1px solid #ddd;
        }
        
        tbody tr:hover {
            background-color: #f5f5f5;
        }
        
        .news-image {
            width: 120px;
            height: 80px;
            object-fit: cover;
            border-radius: 5px;
        }
        
        .news-title {
            font-weight: bold;
            color: #333;
            cursor: pointer;
        }
        
        .news-title:hover {
            color: #667eea;
        }
        
        .news-time {
            color: #666;
            font-size: 12px;
        }
        
        .news-excerpt {
            color: #555;
            font-size: 14px;
            line-height: 1.4;
        }
        
        .loading {
            text-align: center;
            padding: 40px;
            font-size: 18px;
            color: #666;
        }
        
        .error {
            text-align: center;
            padding: 40px;
            color: #d32f2f;
            font-size: 16px;
        }
        
        .read-more {
            display: inline-block;
            margin-top: 5px;
            color: #667eea;
            text-decoration: none;
            font-size: 14px;
        }
        
        .read-more:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üìö Tin t·ª©c Gi√°o d·ª•c VnExpress</h1>
        <div class="update-time" id="updateTime">ƒêang t·∫£i...</div>
        
        <div class="controls">
            <button onclick="loadNews()" id="refreshBtn">üîÑ L√†m m·ªõi</button>
        </div>
        
        <table border="1">
            <caption>Tin t·ª©c m·ªõi nh·∫•t</caption>
            <thead>
                <tr>
                    <th style="width: 140px;">H√¨nh ·∫£nh</th>
                    <th style="width: 40%;">Ti√™u ƒë·ªÅ</th>
                    <th style="width: 35%;">N·ªôi dung</th>
                    <th style="width: 15%;">Th·ªùi gian</th>
                </tr>
            </thead>
            <tbody id="newsBody">
                <tr>
                    <td colspan="4" class="loading">ƒêang t·∫£i tin t·ª©c...</td>
                </tr>
            </tbody>
        </table>
    </div>

    <script type="text/javascript">
        const RSS_URL = 'https://vnexpress.net/rss/giao-duc.rss';
        const CORS_PROXY = 'https://api.allorigins.win/raw?url=';
        const newsBody = document.getElementById('newsBody');
        const updateTime = document.getElementById('updateTime');
        const refreshBtn = document.getElementById('refreshBtn');

        function loadNews() {
            // Disable button v√† hi·ªÉn th·ªã loading
            refreshBtn.disabled = true;
            refreshBtn.textContent = '‚è≥ ƒêang t·∫£i...';
            newsBody.innerHTML = '<tr><td colspan="4" class="loading">ƒêang t·∫£i tin t·ª©c...</td></tr>';
            
            // T·∫°o XMLHttpRequest
            var xhr = new XMLHttpRequest();
            xhr.open("GET", CORS_PROXY + encodeURIComponent(RSS_URL), true);
            xhr.send();
            
            xhr.onreadystatechange = function() {
                if (xhr.readyState == 4 && xhr.status == 200) {
                    try {
                        // Parse XML t·ª´ RSS
                        var parser = new DOMParser();
                        var xmlDoc = parser.parseFromString(xhr.responseText, "text/xml");
                        
                        // L·∫•y t·∫•t c·∫£ items
                        var items = xmlDoc.querySelectorAll('item');
                        
                        if (items.length === 0) {
                            newsBody.innerHTML = '<tr><td colspan="4" class="error">Kh√¥ng c√≥ tin t·ª©c n√†o</td></tr>';
                            return;
                        }
                        
                        // Hi·ªÉn th·ªã tin t·ª©c
                        displayNews(items);
                        
                        // C·∫≠p nh·∫≠t th·ªùi gian
                        var now = new Date();
                        updateTime.textContent = 'C·∫≠p nh·∫≠t l√∫c: ' + now.toLocaleString('vi-VN');
                        
                    } catch (error) {
                        console.error('Error parsing RSS:', error);
                        newsBody.innerHTML = '<tr><td colspan="4" class="error">L·ªói khi x·ª≠ l√Ω d·ªØ li·ªáu: ' + error.message + '</td></tr>';
                    } finally {
                        // Enable button
                        refreshBtn.disabled = false;
                        refreshBtn.textContent = 'üîÑ L√†m m·ªõi';
                    }
                }
                
                if (xhr.readyState == 4 && xhr.status != 200) {
                    newsBody.innerHTML = '<tr><td colspan="4" class="error">L·ªói khi t·∫£i tin t·ª©c. Vui l√≤ng th·ª≠ l·∫°i!</td></tr>';
                    refreshBtn.disabled = false;
                    refreshBtn.textContent = 'üîÑ L√†m m·ªõi';
                }
            }
        }

        function displayNews(items) {
            // X√≥a n·ªôi dung c≈©
            newsBody.innerHTML = '';
            
            // L·∫•y ng√†y m·ªõi nh·∫•t t·ª´ tin ƒë·∫ßu ti√™n
            var latestDate = new Date(items[0].querySelector('pubDate').textContent);
            var latestDay = latestDate.toDateString();
            
            // L·ªçc ch·ªâ l·∫•y tin c·ªßa ng√†y m·ªõi nh·∫•t
            var todayNews = [];
            for (var i = 0; i < items.length; i++) {
                var itemDate = new Date(items[i].querySelector('pubDate').textContent);
                if (itemDate.toDateString() === latestDay) {
                    todayNews.push(items[i]);
                }
            }
            
            // Hi·ªÉn th·ªã th√¥ng b√°o s·ªë l∆∞·ª£ng tin
            if (todayNews.length === 0) {
                newsBody.innerHTML = '<tr><td colspan="4" class="error">Kh√¥ng c√≥ tin t·ª©c m·ªõi trong ng√†y h√¥m nay</td></tr>';
                return;
            }
            
            // C·∫≠p nh·∫≠t caption v·ªõi ng√†y
            var caption = document.querySelector('caption');
            caption.textContent = 'Tin t·ª©c ng√†y ' + latestDate.toLocaleDateString('vi-VN') + ' (' + todayNews.length + ' tin)';
            
            // L·∫∑p qua t·ª´ng tin t·ª©c c·ªßa ng√†y m·ªõi nh·∫•t
            for (var i = 0; i < todayNews.length; i++) {
                var item = todayNews[i];
                var item = items[i];
                
                // L·∫•y th√¥ng tin t·ª´ RSS
                var title = item.querySelector('title').textContent;
                var link = item.querySelector('link').textContent;
                var pubDate = item.querySelector('pubDate').textContent;
                var description = item.querySelector('description').textContent;
                
                // Tr√≠ch xu·∫•t h√¨nh ·∫£nh t·ª´ description (c√≥ th·ªÉ c√≥ ho·∫∑c kh√¥ng)
                var imgMatch = description.match(/src="([^"]+)"/);
                var imageUrl = imgMatch ? imgMatch[1] : 'https://via.placeholder.com/120x80?text=No+Image';
                
                // Tr√≠ch xu·∫•t text t·ª´ description (lo·∫°i b·ªè HTML)
                var textMatch = description.match(/<\/a><\/br>(.*?)$/);
                var excerpt = textMatch ? textMatch[1].trim() : 'Kh√¥ng c√≥ m√¥ t·∫£';
                // Gi·ªõi h·∫°n ƒë·ªô d√†i excerpt
                if (excerpt.length > 150) {
                    excerpt = excerpt.substring(0, 150) + '...';
                }
                
                // Format th·ªùi gian
                var formattedTime = getRelativeTime(pubDate);
                
                // T·∫°o c√°c elements
                var tr = document.createElement('tr');
                
                var tdImage = document.createElement('td');
                var tdTitle = document.createElement('td');
                var tdExcerpt = document.createElement('td');
                var tdTime = document.createElement('td');
                
                // H√¨nh ·∫£nh
                var img = document.createElement('img');
                img.src = imageUrl;
                img.className = 'news-image';
                img.alt = title;
                img.onerror = function() {
                    this.src = 'https://via.placeholder.com/120x80?text=No+Image';
                };
                tdImage.appendChild(img);
                
                // Ti√™u ƒë·ªÅ
                var titleDiv = document.createElement('div');
                titleDiv.className = 'news-title';
                titleDiv.textContent = title;
                titleDiv.onclick = function(url) {
                    return function() {
                        window.open(url, '_blank');
                    }
                }(link);
                
                var readMore = document.createElement('a');
                readMore.href = link;
                readMore.target = '_blank';
                readMore.className = 'read-more';
                readMore.textContent = '‚ûú ƒê·ªçc th√™m';
                
                tdTitle.appendChild(titleDiv);
                tdTitle.appendChild(readMore);
                
                // Excerpt
                var excerptDiv = document.createElement('div');
                excerptDiv.className = 'news-excerpt';
                excerptDiv.textContent = excerpt;
                tdExcerpt.appendChild(excerptDiv);
                
                // Th·ªùi gian
                var timeDiv = document.createElement('div');
                timeDiv.className = 'news-time';
                timeDiv.textContent = formattedTime;
                tdTime.appendChild(timeDiv);
                
                // Append t·∫•t c·∫£ v√†o row
                tr.appendChild(tdImage);
                tr.appendChild(tdTitle);
                tr.appendChild(tdExcerpt);
                tr.appendChild(tdTime);
                
                // Append row v√†o tbody
                newsBody.appendChild(tr);
            }
        }

        function getRelativeTime(dateString) {
            var pubDate = new Date(dateString);
            var now = new Date();
            var diffMs = now - pubDate;
            var diffMins = Math.floor(diffMs / 60000);
            var diffHours = Math.floor(diffMins / 60);
            var diffDays = Math.floor(diffHours / 24);

            if (diffMins < 1) return 'V·ª´a xong';
            if (diffMins < 60) return diffMins + ' ph√∫t tr∆∞·ªõc';
            if (diffHours < 24) return diffHours + ' gi·ªù tr∆∞·ªõc';
            if (diffDays === 1) return 'H√¥m qua';
            if (diffDays < 7) return diffDays + ' ng√†y tr∆∞·ªõc';
            
            return pubDate.toLocaleDateString('vi-VN');
        }

        // T·ª± ƒë·ªông load khi trang ƒë∆∞·ª£c m·ªü
        window.onload = function() {
            loadNews();
        };
    </script>
</body>
</html>
